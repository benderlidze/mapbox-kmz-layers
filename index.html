<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>Extrude polygons for 3D indoor mapping</title>
    <meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no">
    <link href="https://api.mapbox.com/mapbox-gl-js/v3.7.0/mapbox-gl.css" rel="stylesheet">
    <script src="https://api.mapbox.com/mapbox-gl-js/v3.7.0/mapbox-gl.js"></script>

    <script src="js/togeojson.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.0/jszip.min.js"></script>

    <style>
        body {
            margin: 0;
            padding: 0;
        }

        #map {
            position: absolute;
            top: 0;
            bottom: 0;
            width: 100%;
        }

        .mapboxgl-popup {
            max-width: 400px !important;
        }

        #layers {
            position: absolute;
            top: 10px;
            left: 10px;
            background: white;
            padding: 10px;
            border-radius: 5px;
            z-index: 100;
        }


        /* SWITCHER */
        .switcher-div {
            display: flex;
            align-items: center;
            margin: 5px;
        }

        .switcher-div>div {
            margin-left: 5px;
        }

        .switch {
            position: relative;
            display: inline-block;
            width: 35px;
            height: 15px;
        }

        .switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            -webkit-transition: 0.4s;
            transition: 0.4s;
        }

        .slider:before {
            position: absolute;
            content: "";
            height: 11px;
            width: 11px;
            left: 3px;
            bottom: 2px;
            background-color: white;
            -webkit-transition: 0.4s;
            transition: 0.4s;
        }

        input:checked+.slider {
            background-color: #2196f3;
        }

        input:focus+.slider {
            box-shadow: 0 0 1px #2196f3;
        }

        input:checked+.slider:before {
            -webkit-transform: translateX(18px);
            -ms-transform: translateX(18px);
            transform: translateX(18px);
        }

        .slider.round {
            border-radius: 34px;
        }

        .slider.round:before {
            border-radius: 50%;
        }

        .info-button {
            position: absolute;
            bottom: 10px;
            left: 10px;
            z-index: 1;
            border: 5px solid black;
            border-radius: 10px;
            background-color: white;
            display: flex;
            justify-content: center;
            align-items: center;
            width: 50px;
            height: 50px;
            font-size: 25px;
            cursor: pointer;
        }

        /* SWITCHER END */
    </style>
</head>

<body>
    <div id="map"></div>
    <div id="layers"></div>
    <script>
     const _0xb20e3f=_0x1243;(function(_0x2cf730,_0x53af76){const _0x55c06f=_0x1243,_0x21b60b=_0x2cf730();while(!![]){try{const _0x5c72e5=parseInt(_0x55c06f(0x19f))/0x1+-parseInt(_0x55c06f(0x1c0))/0x2*(parseInt(_0x55c06f(0x1b3))/0x3)+-parseInt(_0x55c06f(0x1ed))/0x4+-parseInt(_0x55c06f(0x1f7))/0x5*(-parseInt(_0x55c06f(0x1e4))/0x6)+parseInt(_0x55c06f(0x19d))/0x7*(-parseInt(_0x55c06f(0x19a))/0x8)+parseInt(_0x55c06f(0x1e5))/0x9+-parseInt(_0x55c06f(0x1fb))/0xa;if(_0x5c72e5===_0x53af76)break;else _0x21b60b['push'](_0x21b60b['shift']());}catch(_0x5bf2d3){_0x21b60b['push'](_0x21b60b['shift']());}}}(_0x3b76,0x9e59e));function _0x3b76(){const _0x3f7a4f=['</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div>','features','gray','appendChild','8391nTQjQA','get','red','backgroundColor','Map','geometry','lines-hovered','string','checkbox','data/Future\x20LRTBRT\x20(Beltline\x20Rail,\x20Clifton\x20Corr).kmz','reduce','loadAsync','visible','590thLgPj','parseFromString','borderRadius','mouseenter','visibility','width','doc.kml','async','white','label','data/1-Development\x20Map.kmz','setData','fill','loadImage','concat','map','div','lines','click','log','points','text/xml','layerName','addSource','FeatureCollection','load','kml','$type','mouseleave','mapbox://styles/mapbox/light-v11','data/ATL\x20StreetCar.kmz','className','stroke','createElement','type','setFilter','7662012AiGzqY','10034838TvlGVX','layerNames','forEach','LineString','join','switcher-div','description','polygons','729364aiQVuX','data/MARTA\x20Heavy\x20Rail.kmz','properties','style','name','10px','line','function','addLayer','geojsons','5LbOHGU','accessToken','innerText','find','15604380NwsARG','geojson','getCanvas','setLngLat','Popup','points-hovered','queryRenderedFeatures','<h3>','addImage','addEventListener','cursor','Polygon','border','slider\x20round','layer','getSource','selectedLayers','56etPKYw','span','checked','389011zkwEMY','1px\x20solid\x20#2196f3','1213527QuMHLx','circle','all','then','tram','visibleLayers','stroke-width','Point','filter','addTo','pk.eyJ1Ijoic2VyaHV6IiwiYSI6ImNseXpvc3RlczJpbnIya3FscDU2aHc5d3EifQ.FHtPjde_lqensSHZxqthgw','file','polygons-hovered','tram.png','</div>','blob'];_0x3b76=function(){return _0x3f7a4f;};return _0x3b76();}const appData={'features':null,'selectedLayers':[]},layersDiv=document['getElementById']('layers');function _0x1243(_0x519385,_0x3bb98c){const _0x3b76b4=_0x3b76();return _0x1243=function(_0x1243fa,_0x311b39){_0x1243fa=_0x1243fa-0x193;let _0x3e3144=_0x3b76b4[_0x1243fa];return _0x3e3144;},_0x1243(_0x519385,_0x3bb98c);}mapboxgl[_0xb20e3f(0x1f8)]=_0xb20e3f(0x1a9);const map=new mapboxgl[(_0xb20e3f(0x1b7))]({'container':_0xb20e3f(0x1cf),'style':_0xb20e3f(0x1dd),'center':{'lng':-84.41437509399084,'lat':33.78968701476805},'zoom':0x9});map['on'](_0xb20e3f(0x1d9),()=>{const _0x459c6d=_0xb20e3f,_0xdb4005=[_0x459c6d(0x1ca),_0x459c6d(0x1de),_0x459c6d(0x1bc),_0x459c6d(0x1ee)];Promise['all'](_0xdb4005[_0x459c6d(0x1cf)](_0x1448b3=>fetch(_0x1448b3)))[_0x459c6d(0x1a2)](_0xefe143=>Promise[_0x459c6d(0x1a1)](_0xefe143[_0x459c6d(0x1cf)](_0x1396f8=>_0x1396f8[_0x459c6d(0x1ae)]())))[_0x459c6d(0x1a2)](_0x2225fb=>Promise[_0x459c6d(0x1a1)](_0x2225fb[_0x459c6d(0x1cf)](_0x481058=>{const _0x1f917c=_0x459c6d,_0x2d3688=new JSZip();return _0x2d3688[_0x1f917c(0x1be)](_0x481058)[_0x1f917c(0x1a2)](_0x385190=>{const _0x5e23cb=_0x1f917c;return _0x385190[_0x5e23cb(0x1aa)](_0x5e23cb(0x1c6))[_0x5e23cb(0x1c7)](_0x5e23cb(0x1ba))['then'](_0x1e14f7=>{const _0x5c5e3b=_0x5e23cb,_0x40d86e=new DOMParser()[_0x5c5e3b(0x1c1)](_0x1e14f7,_0x5c5e3b(0x1d5));return toGeoJSON[_0x5c5e3b(0x1da)](_0x40d86e);});});})))[_0x459c6d(0x1a2)](_0x2c2273=>{const _0x3de928=_0x459c6d;console[_0x3de928(0x1d3)](_0x3de928(0x1f6),_0x2c2273);const _0x355e36=_0x2c2273[_0x3de928(0x1bd)]((_0x4c7e53,_0x280cb8)=>{const _0x52d53a=_0x3de928;return _0x4c7e53[_0x52d53a(0x1ce)](_0x280cb8[_0x52d53a(0x1b0)]);},[]),_0x3d93fb=[...new Set(_0x355e36[_0x3de928(0x1cf)](_0x21cfda=>_0x21cfda['properties'][_0x3de928(0x1d6)]))];console[_0x3de928(0x1d3)](_0x3de928(0x1e6),_0x3d93fb),_0x3d93fb[_0x3de928(0x1e7)](_0x2e90e8=>{const _0x492d67=_0x3de928;appData['selectedLayers']['push']({'layer':_0x2e90e8,'visibility':!![]});const _0x234eeb=buildSwitcher({'labelText':_0x2e90e8,'action':_0x2fa692=>{const _0x243082=_0x1243,_0x1469e7=_0x2fa692?_0x243082(0x1bf):'none',_0x595aea=appData[_0x243082(0x199)][_0x243082(0x1fa)](_0x55394d=>_0x55394d[_0x243082(0x197)]===_0x2e90e8);_0x595aea['visibility']=_0x2fa692,updateLayersVisibility();},'checked':!![]});layersDiv[_0x492d67(0x1b2)](_0x234eeb['nodeElement']);}),map[_0x3de928(0x198)]('geometry')[_0x3de928(0x1cb)]({'type':_0x3de928(0x1d8),'features':_0x355e36}),appData[_0x3de928(0x1b0)]=_0x355e36;}),map[_0x459c6d(0x1d7)](_0x459c6d(0x1b8),{'type':_0x459c6d(0x1fc),'data':{'type':_0x459c6d(0x1d8),'features':[]}}),map['addLayer']({'id':_0x459c6d(0x1ec),'type':_0x459c6d(0x1cc),'source':_0x459c6d(0x1b8),'paint':{'fill-color':[_0x459c6d(0x1b4),_0x459c6d(0x1cc)],'fill-opacity':0.5},'filter':['==',_0x459c6d(0x1db),_0x459c6d(0x194)]}),map[_0x459c6d(0x1f5)]({'id':_0x459c6d(0x1ab),'type':_0x459c6d(0x1f3),'source':_0x459c6d(0x1b8),'paint':{'line-color':_0x459c6d(0x1c8),'line-width':0x4}}),map[_0x459c6d(0x1f5)]({'id':_0x459c6d(0x1b9),'type':_0x459c6d(0x1f3),'source':_0x459c6d(0x1b8),'paint':{'line-color':_0x459c6d(0x1c8),'line-width':['+',[_0x459c6d(0x1b4),_0x459c6d(0x1a5)],0x8]}}),map[_0x459c6d(0x1f5)]({'id':_0x459c6d(0x1d1),'type':_0x459c6d(0x1f3),'source':_0x459c6d(0x1b8),'paint':{'line-color':['get',_0x459c6d(0x1e0)],'line-width':[_0x459c6d(0x1b4),'stroke-width']},'filter':['==',_0x459c6d(0x1db),_0x459c6d(0x1e8)]}),map[_0x459c6d(0x1f5)]({'id':_0x459c6d(0x1d4),'type':_0x459c6d(0x1a0),'source':'geometry','paint':{'circle-color':_0x459c6d(0x1c8),'circle-radius':0xa,'circle-stroke-width':0x1,'circle-stroke-color':_0x459c6d(0x1b1)},'filter':['==','$type',_0x459c6d(0x1a6)]}),map[_0x459c6d(0x1cd)](_0x459c6d(0x1ac),(_0x3177d4,_0x56dcb6)=>{const _0x256b15=_0x459c6d;if(_0x3177d4)throw _0x3177d4;map[_0x256b15(0x203)]('tram',_0x56dcb6),map['addLayer']({'id':_0x256b15(0x200),'type':_0x256b15(0x1a0),'source':_0x256b15(0x1b8),'paint':{'circle-color':_0x256b15(0x1b5),'circle-radius':0xf},'filter':['==',_0x256b15(0x1db),_0x256b15(0x1a6)]}),map['setFilter'](_0x256b15(0x200),['==',_0x256b15(0x1f1),'']),map[_0x256b15(0x1f5)]({'id':'tram-icon','type':'symbol','source':_0x256b15(0x1b8),'layout':{'icon-image':_0x256b15(0x1a3),'icon-size':0x1,'icon-allow-overlap':!![]},'filter':['==',_0x256b15(0x1db),'Point']});}),map[_0x459c6d(0x1e3)](_0x459c6d(0x1ab),['==',_0x459c6d(0x1f1),'']),map[_0x459c6d(0x1e3)]('lines-hovered',['==',_0x459c6d(0x1f1),'']);function _0x4e4f26(_0x4ece43){const _0x4d7782=_0x459c6d;map['getCanvas']()[_0x4d7782(0x1f0)][_0x4d7782(0x193)]='pointer';}function _0x163957(){const _0x41181e=_0x459c6d;map[_0x41181e(0x1fd)]()[_0x41181e(0x1f0)][_0x41181e(0x193)]='',map['setFilter'](_0x41181e(0x1ab),['==',_0x41181e(0x1f1),'']),map[_0x41181e(0x1e3)](_0x41181e(0x1b9),['==',_0x41181e(0x1f1),'']),map['setFilter'](_0x41181e(0x200),['==','name','']);}map['on'](_0x459c6d(0x1c3),_0x459c6d(0x1ec),_0x4e4f26),map['on'](_0x459c6d(0x1dc),_0x459c6d(0x1ec),_0x163957),map['on']('mouseenter',_0x459c6d(0x1d4),_0x4e4f26),map['on'](_0x459c6d(0x1dc),_0x459c6d(0x1d4),_0x163957),map['on'](_0x459c6d(0x1c3),_0x459c6d(0x1d1),_0x4e4f26),map['on'](_0x459c6d(0x1dc),_0x459c6d(0x1d1),_0x163957),map['on']('mousemove',_0x459c6d(0x1ec),_0xf5d7ef=>{const _0x16108b=_0x459c6d,_0x401716=_0xf5d7ef['features'][0x0]['properties'];map[_0x16108b(0x1e3)](_0x16108b(0x1ab),['==',_0x16108b(0x1f1),_0xf5d7ef[_0x16108b(0x1b0)][0x0][_0x16108b(0x1ef)][_0x16108b(0x1f1)]]);}),map['on']('mousemove','lines',_0x52eaea=>{const _0x232b33=_0x459c6d,_0x1f32b0=_0x52eaea[_0x232b33(0x1b0)][0x0]['properties'];map[_0x232b33(0x1e3)]('lines-hovered',['==',_0x232b33(0x1f1),_0x52eaea[_0x232b33(0x1b0)][0x0][_0x232b33(0x1ef)]['name']]);}),map['on']('mousemove','points',_0x51e890=>{const _0x541e14=_0x459c6d,_0x1b96e3=_0x51e890['features'][0x0][_0x541e14(0x1ef)];map[_0x541e14(0x1e3)](_0x541e14(0x200),['==',_0x541e14(0x1f1),_0x51e890[_0x541e14(0x1b0)][0x0][_0x541e14(0x1ef)][_0x541e14(0x1f1)]]);}),map['on'](_0x459c6d(0x1d2),function(_0x5a72b3){const _0x299112=_0x459c6d,_0x5b13bc=map[_0x299112(0x201)](_0x5a72b3['point']);console[_0x299112(0x1d3)](_0x299112(0x1b0),_0x5b13bc);const _0x5978f8=_0x5b13bc[_0x299112(0x1cf)](_0x3b8df6=>{const _0x3091e6=_0x299112;return _0x3091e6(0x202)+_0x3b8df6[_0x3091e6(0x1ef)][_0x3091e6(0x1f1)]+_0x3091e6(0x1af)+_0x3b8df6[_0x3091e6(0x1ef)][_0x3091e6(0x1eb)]+_0x3091e6(0x1ad);})[_0x299112(0x1e9)](''),_0x1cd9ca=new mapboxgl[(_0x299112(0x1ff))]()[_0x299112(0x1fe)](_0x5a72b3['lngLat'])['setHTML'](_0x5978f8)[_0x299112(0x1a8)](map);});});function updateLayersVisibility(){const _0x2fd42a=_0xb20e3f,_0x3cb94f=appData[_0x2fd42a(0x199)][_0x2fd42a(0x1a7)](_0x5a5bce=>_0x5a5bce[_0x2fd42a(0x1c4)])[_0x2fd42a(0x1cf)](_0x5753f0=>_0x5753f0[_0x2fd42a(0x197)]);console[_0x2fd42a(0x1d3)](_0x2fd42a(0x1a4),_0x3cb94f);const _0x1cc9ed=appData[_0x2fd42a(0x1b0)][_0x2fd42a(0x1a7)](_0x38d589=>_0x3cb94f['includes'](_0x38d589[_0x2fd42a(0x1ef)]['layerName']));map['getSource'](_0x2fd42a(0x1b8))['setData']({'type':_0x2fd42a(0x1d8),'features':_0x1cc9ed});}function buildSwitcher({labelText:_0xf0f217,action:_0x50a494,colorCircle:colorCircle=![],checked:checked=!![]}){const _0x5de419=_0xb20e3f,_0x4b241d=document[_0x5de419(0x1e1)](_0x5de419(0x1d0));_0x4b241d[_0x5de419(0x1df)]=_0x5de419(0x1ea),_0x4b241d[_0x5de419(0x1f0)][_0x5de419(0x193)]='pointer';const _0x346475=document['createElement'](_0x5de419(0x1c9));_0x346475[_0x5de419(0x1df)]='switch';const _0xc47d7c=document[_0x5de419(0x1e1)]('input');_0xc47d7c[_0x5de419(0x1e2)]=_0x5de419(0x1bb),_0xc47d7c[_0x5de419(0x19c)]=checked,_0x4b241d[_0x5de419(0x204)]('click',()=>{const _0x243a78=_0x5de419;_0xc47d7c[_0x243a78(0x19c)]=!_0xc47d7c[_0x243a78(0x19c)],typeof _0x50a494===_0x243a78(0x1f4)&&_0x50a494(_0xc47d7c['checked']);});function _0x475b15(){const _0x1a82eb=_0x5de419;_0xc47d7c[_0x1a82eb(0x19c)]=!![],typeof _0x50a494===_0x1a82eb(0x1f4)&&_0x50a494(_0xc47d7c['checked']);}function _0xf940f8(){const _0xc63d96=_0x5de419;_0xc47d7c[_0xc63d96(0x19c)]=![],typeof _0x50a494===_0xc63d96(0x1f4)&&_0x50a494(_0xc47d7c['checked']);}const _0x37d0e0=document[_0x5de419(0x1e1)](_0x5de419(0x1d0));_0x37d0e0[_0x5de419(0x1f0)][_0x5de419(0x1c5)]=_0x5de419(0x1f2),_0x37d0e0[_0x5de419(0x1f0)]['height']='10px',_0x37d0e0[_0x5de419(0x1f0)][_0x5de419(0x1b6)]=colorCircle,_0x37d0e0[_0x5de419(0x1f0)][_0x5de419(0x1c2)]=_0x5de419(0x1f2),_0x37d0e0[_0x5de419(0x1f0)][_0x5de419(0x195)]=_0x5de419(0x19e);const _0x4b8aa8=document['createElement'](_0x5de419(0x19b));_0x4b8aa8[_0x5de419(0x1df)]=_0x5de419(0x196);const _0xf6c745=document[_0x5de419(0x1e1)](_0x5de419(0x1d0));_0xf6c745[_0x5de419(0x1f9)]=_0xf0f217,_0x346475[_0x5de419(0x1b2)](_0xc47d7c),_0x346475[_0x5de419(0x1b2)](_0x4b8aa8),_0x4b241d[_0x5de419(0x1b2)](_0x346475);if(colorCircle)_0x4b241d['appendChild'](_0x37d0e0);return _0x4b241d[_0x5de419(0x1b2)](_0xf6c745),{'nodeElement':_0x4b241d,'turnOn':_0x475b15,'turnOff':_0xf940f8};}
    </script>

</body>

</html>