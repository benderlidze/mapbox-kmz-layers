<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>Extrude polygons for 3D indoor mapping</title>
    <meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no">
    <link href="https://api.mapbox.com/mapbox-gl-js/v3.7.0/mapbox-gl.css" rel="stylesheet">
    <script src="https://api.mapbox.com/mapbox-gl-js/v3.7.0/mapbox-gl.js"></script>

    <script src="js/togeojson.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.0/jszip.min.js"></script>

    <script
        src="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v5.0.3/mapbox-gl-geocoder.min.js"></script>
    <link rel="stylesheet"
        href="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v5.0.3/mapbox-gl-geocoder.css"
        type="text/css">

    <style>
        body {
            margin: 0;
            padding: 0;
        }

        #map {
            position: absolute;
            top: 0;
            bottom: 0;
            width: 100%;
        }

        .mapboxgl-popup {
            max-width: 400px !important;
        }

        #layers {
            position: absolute;
            top: 10px;
            left: 10px;
            background: white;
            padding: 10px;
            border-radius: 5px;
            z-index: 100;
        }


        /* SWITCHER */
        .switcher-div {
            display: flex;
            align-items: center;
            margin: 5px;
        }

        .switcher-div>div {
            margin-left: 5px;
        }

        .switch {
            position: relative;
            display: inline-block;
            width: 35px;
            height: 15px;
        }

        .switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            -webkit-transition: 0.4s;
            transition: 0.4s;
        }

        .slider:before {
            position: absolute;
            content: "";
            height: 11px;
            width: 11px;
            left: 3px;
            bottom: 2px;
            background-color: white;
            -webkit-transition: 0.4s;
            transition: 0.4s;
        }

        input:checked+.slider {
            background-color: #2196f3;
        }

        input:focus+.slider {
            box-shadow: 0 0 1px #2196f3;
        }

        input:checked+.slider:before {
            -webkit-transform: translateX(18px);
            -ms-transform: translateX(18px);
            transform: translateX(18px);
        }

        .slider.round {
            border-radius: 34px;
        }

        .slider.round:before {
            border-radius: 50%;
        }

        .info-button {
            position: absolute;
            bottom: 10px;
            left: 10px;
            z-index: 1;
            border: 5px solid black;
            border-radius: 10px;
            background-color: white;
            display: flex;
            justify-content: center;
            align-items: center;
            width: 50px;
            height: 50px;
            font-size: 25px;
            cursor: pointer;
        }

        /* SWITCHER END */
    </style>
</head>

<body>
    <div id="map"></div>
    <div id="layers"></div>
    <script>
       const _0x244a97=_0x5b50;(function(_0x1b4e1f,_0x5ce383){const _0x26318c=_0x5b50,_0xd60bf6=_0x1b4e1f();while(!![]){try{const _0x2d61ad=parseInt(_0x26318c(0x125))/0x1*(parseInt(_0x26318c(0x171))/0x2)+-parseInt(_0x26318c(0x134))/0x3*(-parseInt(_0x26318c(0x16e))/0x4)+parseInt(_0x26318c(0x142))/0x5*(-parseInt(_0x26318c(0x140))/0x6)+-parseInt(_0x26318c(0x155))/0x7+-parseInt(_0x26318c(0x152))/0x8+parseInt(_0x26318c(0x165))/0x9+parseInt(_0x26318c(0x143))/0xa;if(_0x2d61ad===_0x5ce383)break;else _0xd60bf6['push'](_0xd60bf6['shift']());}catch(_0x59e0b0){_0xd60bf6['push'](_0xd60bf6['shift']());}}}(_0x3c92,0xefd8e));function _0x3c92(){const _0x34d089=['Popup','layerName','visibility','properties','className','click','kml','lines-hovered','addImage','addTo','4835tDwZBF','point','points-hovered','Polygon','checked','10px','concat','tram-icon','name','addLayer','then','red','data/MARTA\x20Heavy\x20Rail.kmz','load','description','18UTPjHE','line','get','data/ATL\x20StreetCar.kmz','queryRenderedFeatures','<h3>','width','findIndex','switch','mousemove','visibleLayers','filter','6TlSiut','setData','9633170tNHDdH','22791850UXfeWy','file','function','icon','forEach','#c500ff','blob','Point','tram','createElement','points','all','push','mapbox://styles/mapbox/light-v11','mouseleave','14807448XpmcKQ','stroke-width','switcher-div','8005417HqYzsf','backgroundColor','white','geojsons','tram.png','pk.eyJ1IjoiY29qbyIsImEiOiJjbTFndHU1ZjMwN3owMmlxMXRlejlrMm9oIn0.ezRZvJl1XpcOF1Eqhc2iCg','addControl','selectedLayers','1px\x20solid\x20#2196f3','setLngLat','polygons','setFilter','none','slider\x20round','style','getSource','14450418nyRIWq','Map','loadAsync','includes','$type','fill','loadImage','FeatureCollection','parseFromString','98452ZDZwPe','accessToken','LineString','774gqHQYt','circle','Layer0_Symbol_f34c9f00_0.png','doc.kml','div','getElementById','getCanvas','appendChild','map','data/Future\x20LRTBRT\x20(Beltline\x20Rail,\x20Clifton\x20Corr).kmz','geojson','string','geometry','visible','borderRadius','features','layer','mouseenter','cursor','input','Layer0_Symbol_','symbol','label','log','type','find','pointer','uniqueFeatures','polygons-hovered','f.properties','setHTML','addEventListener','noicon','lines','text/xml','innerText','layers','async'];_0x3c92=function(){return _0x34d089;};return _0x3c92();}const appData={'features':null,'selectedLayers':[]},layersDiv=document[_0x244a97(0x176)](_0x244a97(0x195));mapboxgl[_0x244a97(0x16f)]=_0x244a97(0x15a);const map=new mapboxgl[(_0x244a97(0x166))]({'container':_0x244a97(0x179),'style':_0x244a97(0x150),'center':{'lng':-84.41437509399084,'lat':33.78968701476805},'zoom':0x9});map[_0x244a97(0x15b)](new MapboxGeocoder({'accessToken':mapboxgl[_0x244a97(0x16f)],'mapboxgl':mapboxgl})),map['on'](_0x244a97(0x132),()=>{const _0x28f518=_0x244a97,_0xa7a4da=['data/My\x20Places.kml',_0x28f518(0x137),_0x28f518(0x17a),_0x28f518(0x131)];Promise[_0x28f518(0x14e)](_0xa7a4da['map'](_0x4d25bf=>fetch(_0x4d25bf)))['then'](_0x324789=>Promise[_0x28f518(0x14e)](_0x324789[_0x28f518(0x179)](_0x86db2b=>_0x86db2b[_0x28f518(0x149)]())))[_0x28f518(0x12f)](_0x4bd3d5=>Promise[_0x28f518(0x14e)](_0x4bd3d5[_0x28f518(0x179)](_0x14f9f0=>{const _0x49b0a2=_0x28f518;console['log'](_0x49b0a2(0x149),_0x14f9f0);if(_0x14f9f0[_0x49b0a2(0x189)]==='application/vnd.google-earth.kmz'){const _0x5f5bc9=new JSZip();return _0x5f5bc9[_0x49b0a2(0x167)](_0x14f9f0)['then'](_0x3e7a14=>{const _0xe3aa=_0x49b0a2;return _0x3e7a14[_0xe3aa(0x144)](_0xe3aa(0x174))[_0xe3aa(0x196)](_0xe3aa(0x17c))['then'](_0x58a0ec=>{const _0x244784=_0xe3aa,_0x46e2bf=new DOMParser()[_0x244784(0x16d)](_0x58a0ec,_0x244784(0x193));return toGeoJSON[_0x244784(0x121)](_0x46e2bf);});});}else return _0x14f9f0['text']()[_0x49b0a2(0x12f)](_0xe577b8=>{const _0x540f7a=_0x49b0a2,_0x102a9c=new DOMParser()[_0x540f7a(0x16d)](_0xe577b8,_0x540f7a(0x193));return toGeoJSON[_0x540f7a(0x121)](_0x102a9c);});})))[_0x28f518(0x12f)](_0x508283=>{const _0x440619=_0x28f518;console['log'](_0x440619(0x158),_0x508283);const _0x48817f=_0x508283['reduce']((_0x102d84,_0x2f0fa)=>{const _0x51be62=_0x440619;return _0x102d84[_0x51be62(0x12b)](_0x2f0fa['features']);},[]),_0xedbc8c=[...new Set(_0x48817f[_0x440619(0x179)](_0x594c4d=>_0x594c4d[_0x440619(0x19a)][_0x440619(0x198)]))];console[_0x440619(0x188)]('layerNames',_0xedbc8c),_0xedbc8c[_0x440619(0x147)](_0x168ab2=>{const _0x2bb8cc=_0x440619;appData[_0x2bb8cc(0x15c)][_0x2bb8cc(0x14f)]({'layer':_0x168ab2,'visibility':!![]});const _0x11b380=buildSwitcher({'labelText':_0x168ab2,'action':_0x367166=>{const _0x40163f=_0x2bb8cc,_0x50e01c=_0x367166?_0x40163f(0x17e):_0x40163f(0x161),_0x1020b2=appData[_0x40163f(0x15c)][_0x40163f(0x18a)](_0x4e7441=>_0x4e7441[_0x40163f(0x181)]===_0x168ab2);_0x1020b2[_0x40163f(0x199)]=_0x367166,updateLayersVisibility();},'checked':!![]});layersDiv[_0x2bb8cc(0x178)](_0x11b380['nodeElement']);}),console[_0x440619(0x188)](_0x440619(0x180),_0x48817f),_0x48817f[_0x440619(0x147)](_0x2d6553=>{const _0x171284=_0x440619;if(_0x2d6553[_0x171284(0x17d)][_0x171284(0x189)]===_0x171284(0x14a)){_0x2d6553[_0x171284(0x19a)][_0x171284(0x16a)]='white',console[_0x171284(0x188)](_0x171284(0x18e),_0x2d6553['properties']);if(_0x2d6553[_0x171284(0x19a)][_0x171284(0x146)]&&_0x2d6553['properties'][_0x171284(0x146)][_0x171284(0x168)](_0x171284(0x185))){const _0x486c4d=_0x2d6553[_0x171284(0x19a)][_0x171284(0x146)]===_0x171284(0x173)?'#42c000':_0x171284(0x148);_0x2d6553[_0x171284(0x19a)][_0x171284(0x16a)]=_0x486c4d,_0x2d6553[_0x171284(0x19a)][_0x171284(0x191)]=!![];}}}),map[_0x440619(0x164)](_0x440619(0x17d))[_0x440619(0x141)]({'type':_0x440619(0x16c),'features':_0x48817f}),appData[_0x440619(0x180)]=_0x48817f;}),map['addSource'](_0x28f518(0x17d),{'type':_0x28f518(0x17b),'data':{'type':_0x28f518(0x16c),'features':[]}}),map[_0x28f518(0x12e)]({'id':'polygons','type':'fill','source':_0x28f518(0x17d),'paint':{'fill-color':[_0x28f518(0x136),_0x28f518(0x16a)],'fill-opacity':0.5},'filter':['==','$type',_0x28f518(0x128)]}),map['addLayer']({'id':_0x28f518(0x18d),'type':_0x28f518(0x135),'source':_0x28f518(0x17d),'paint':{'line-color':'white','line-width':0x4}}),map[_0x28f518(0x12e)]({'id':'lines-hovered','type':_0x28f518(0x135),'source':_0x28f518(0x17d),'paint':{'line-color':_0x28f518(0x157),'line-width':['+',['get',_0x28f518(0x153)],0x8]}}),map[_0x28f518(0x12e)]({'id':_0x28f518(0x192),'type':'line','source':'geometry','paint':{'line-color':[_0x28f518(0x136),'stroke'],'line-width':[_0x28f518(0x136),'stroke-width']},'filter':['==','$type',_0x28f518(0x170)]}),map['addLayer']({'id':_0x28f518(0x14d),'type':'circle','source':_0x28f518(0x17d),'paint':{'circle-color':[_0x28f518(0x136),'fill'],'circle-radius':0xa,'circle-stroke-width':0x1,'circle-stroke-color':'gray'},'filter':['==',_0x28f518(0x169),'Point']}),map[_0x28f518(0x16b)](_0x28f518(0x159),(_0x15c9c6,_0x2742e5)=>{const _0x1fd003=_0x28f518;if(_0x15c9c6)throw _0x15c9c6;map[_0x1fd003(0x123)](_0x1fd003(0x14b),_0x2742e5),map[_0x1fd003(0x12e)]({'id':'points-hovered','type':_0x1fd003(0x172),'source':_0x1fd003(0x17d),'paint':{'circle-color':_0x1fd003(0x130),'circle-radius':0xf},'filter':['==',_0x1fd003(0x169),_0x1fd003(0x14a)]}),map[_0x1fd003(0x160)](_0x1fd003(0x127),['==',_0x1fd003(0x12d),'']),map['addLayer']({'id':_0x1fd003(0x12c),'type':_0x1fd003(0x186),'source':_0x1fd003(0x17d),'layout':{'icon-image':'tram','icon-size':0x1,'icon-allow-overlap':!![]},'filter':[_0x1fd003(0x14e),['==',_0x1fd003(0x169),'Point'],['!has',_0x1fd003(0x191)]]});}),map[_0x28f518(0x160)](_0x28f518(0x18d),['==',_0x28f518(0x12d),'']),map[_0x28f518(0x160)](_0x28f518(0x122),['==',_0x28f518(0x12d),'']);function _0x155c1b(_0x8d5b52){const _0x306f72=_0x28f518;map[_0x306f72(0x177)]()['style'][_0x306f72(0x183)]=_0x306f72(0x18b);}function _0x5aa61d(){const _0x53ec73=_0x28f518;map['getCanvas']()[_0x53ec73(0x163)][_0x53ec73(0x183)]='',map[_0x53ec73(0x160)](_0x53ec73(0x18d),['==',_0x53ec73(0x12d),'']),map[_0x53ec73(0x160)](_0x53ec73(0x122),['==',_0x53ec73(0x12d),'']),map[_0x53ec73(0x160)](_0x53ec73(0x127),['==','name','']);}map['on'](_0x28f518(0x182),_0x28f518(0x15f),_0x155c1b),map['on']('mouseleave','polygons',_0x5aa61d),map['on'](_0x28f518(0x182),'points',_0x155c1b),map['on'](_0x28f518(0x151),_0x28f518(0x14d),_0x5aa61d),map['on'](_0x28f518(0x182),_0x28f518(0x192),_0x155c1b),map['on'](_0x28f518(0x151),_0x28f518(0x192),_0x5aa61d),map['on'](_0x28f518(0x13d),'polygons',_0x54e182=>{const _0x42f94c=_0x28f518,_0x152353=_0x54e182[_0x42f94c(0x180)][0x0][_0x42f94c(0x19a)];map[_0x42f94c(0x160)](_0x42f94c(0x18d),['==','name',_0x54e182[_0x42f94c(0x180)][0x0][_0x42f94c(0x19a)][_0x42f94c(0x12d)]]);}),map['on'](_0x28f518(0x13d),_0x28f518(0x192),_0x1ef58d=>{const _0x39b167=_0x28f518,_0x308eca=_0x1ef58d[_0x39b167(0x180)][0x0]['properties'];map[_0x39b167(0x160)]('lines-hovered',['==',_0x39b167(0x12d),_0x1ef58d[_0x39b167(0x180)][0x0]['properties'][_0x39b167(0x12d)]]);}),map['on'](_0x28f518(0x13d),_0x28f518(0x14d),_0x7d1f52=>{const _0x1f1197=_0x28f518,_0x100b63=_0x7d1f52[_0x1f1197(0x180)][0x0][_0x1f1197(0x19a)];map['setFilter'](_0x1f1197(0x127),['==',_0x1f1197(0x12d),_0x7d1f52[_0x1f1197(0x180)][0x0][_0x1f1197(0x19a)][_0x1f1197(0x12d)]]);});function _0x1d79ea(_0x3b7816){const _0x371f1b=_0x28f518,_0x3f7b4c=map[_0x371f1b(0x138)](_0x3b7816[_0x371f1b(0x126)]),_0x37e378=_0x3f7b4c[_0x371f1b(0x13f)]((_0x39e02,_0x19ecb9,_0x1d359b)=>_0x1d359b[_0x371f1b(0x13b)](_0x4653d0=>_0x4653d0[_0x371f1b(0x19a)][_0x371f1b(0x12d)]===_0x39e02[_0x371f1b(0x19a)][_0x371f1b(0x12d)])===_0x19ecb9);console[_0x371f1b(0x188)](_0x371f1b(0x18c),_0x37e378);const _0x1181f6=_0x37e378[_0x371f1b(0x13f)](_0x4a9099=>_0x4a9099[_0x371f1b(0x19a)][_0x371f1b(0x12d)])[_0x371f1b(0x179)](_0x192e81=>{const _0x5998ce=_0x371f1b;return descr=_0x192e81['properties'][_0x5998ce(0x133)]?_0x192e81['properties'][_0x5998ce(0x133)]:'',_0x5998ce(0x139)+_0x192e81[_0x5998ce(0x19a)][_0x5998ce(0x12d)]+'</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+descr;})[0x0],_0x55980f=new mapboxgl[(_0x371f1b(0x197))]()[_0x371f1b(0x15e)](_0x3b7816['lngLat'])[_0x371f1b(0x18f)](_0x1181f6)[_0x371f1b(0x124)](map);}map['on'](_0x28f518(0x19c),_0x28f518(0x15f),_0x1d79ea),map['on'](_0x28f518(0x19c),_0x28f518(0x192),_0x1d79ea),map['on'](_0x28f518(0x19c),_0x28f518(0x14d),_0x1d79ea);});function updateLayersVisibility(){const _0x51aab9=_0x244a97,_0x119951=appData[_0x51aab9(0x15c)][_0x51aab9(0x13f)](_0x50c0c6=>_0x50c0c6[_0x51aab9(0x199)])[_0x51aab9(0x179)](_0x27d744=>_0x27d744[_0x51aab9(0x181)]);console[_0x51aab9(0x188)](_0x51aab9(0x13e),_0x119951);const _0x3841c3=appData[_0x51aab9(0x180)][_0x51aab9(0x13f)](_0x38fec4=>_0x119951[_0x51aab9(0x168)](_0x38fec4[_0x51aab9(0x19a)][_0x51aab9(0x198)]));map['getSource']('geometry')[_0x51aab9(0x141)]({'type':_0x51aab9(0x16c),'features':_0x3841c3});}function _0x5b50(_0xee3772,_0x36383b){const _0x3c92b8=_0x3c92();return _0x5b50=function(_0x5b505f,_0x56462e){_0x5b505f=_0x5b505f-0x121;let _0x1159db=_0x3c92b8[_0x5b505f];return _0x1159db;},_0x5b50(_0xee3772,_0x36383b);}function buildSwitcher({labelText:_0x111263,action:_0xf8b7fe,colorCircle:colorCircle=![],checked:checked=!![]}){const _0x1a8636=_0x244a97,_0x192bee=document[_0x1a8636(0x14c)](_0x1a8636(0x175));_0x192bee['className']=_0x1a8636(0x154),_0x192bee[_0x1a8636(0x163)][_0x1a8636(0x183)]=_0x1a8636(0x18b);const _0x5b5d30=document[_0x1a8636(0x14c)](_0x1a8636(0x187));_0x5b5d30['className']=_0x1a8636(0x13c);const _0x2819a0=document[_0x1a8636(0x14c)](_0x1a8636(0x184));_0x2819a0[_0x1a8636(0x189)]='checkbox',_0x2819a0['checked']=checked,_0x192bee[_0x1a8636(0x190)]('click',()=>{const _0x474bbd=_0x1a8636;_0x2819a0[_0x474bbd(0x129)]=!_0x2819a0[_0x474bbd(0x129)],typeof _0xf8b7fe===_0x474bbd(0x145)&&_0xf8b7fe(_0x2819a0[_0x474bbd(0x129)]);});function _0x3c099e(){const _0x14d5d5=_0x1a8636;_0x2819a0[_0x14d5d5(0x129)]=!![],typeof _0xf8b7fe===_0x14d5d5(0x145)&&_0xf8b7fe(_0x2819a0['checked']);}function _0x5448cb(){const _0x5898ea=_0x1a8636;_0x2819a0[_0x5898ea(0x129)]=![],typeof _0xf8b7fe===_0x5898ea(0x145)&&_0xf8b7fe(_0x2819a0[_0x5898ea(0x129)]);}const _0x378a7d=document['createElement'](_0x1a8636(0x175));_0x378a7d[_0x1a8636(0x163)][_0x1a8636(0x13a)]=_0x1a8636(0x12a),_0x378a7d[_0x1a8636(0x163)]['height']=_0x1a8636(0x12a),_0x378a7d['style'][_0x1a8636(0x156)]=colorCircle,_0x378a7d[_0x1a8636(0x163)][_0x1a8636(0x17f)]=_0x1a8636(0x12a),_0x378a7d[_0x1a8636(0x163)]['border']=_0x1a8636(0x15d);const _0x293e36=document[_0x1a8636(0x14c)]('span');_0x293e36[_0x1a8636(0x19b)]=_0x1a8636(0x162);const _0x436687=document[_0x1a8636(0x14c)](_0x1a8636(0x175));_0x436687[_0x1a8636(0x194)]=_0x111263,_0x5b5d30['appendChild'](_0x2819a0),_0x5b5d30['appendChild'](_0x293e36),_0x192bee[_0x1a8636(0x178)](_0x5b5d30);if(colorCircle)_0x192bee[_0x1a8636(0x178)](_0x378a7d);return _0x192bee['appendChild'](_0x436687),{'nodeElement':_0x192bee,'turnOn':_0x3c099e,'turnOff':_0x5448cb};}
    </script>

</body>

</html>